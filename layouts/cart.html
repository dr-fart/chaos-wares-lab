{{ define "main" }}
<div class="container">
    <div class="page-header">
        <h1>Shopping Cart</h1>
    </div>
    
    <div class="cart-container">
        <div class="cart-items" id="cart-items">
            <!-- Cart items will be populated by JavaScript -->
        </div>
        
        <div class="cart-total" id="cart-total">
            Total: $0.00
        </div>
        
        <div class="cart-actions">
            <button class="btn btn-secondary" onclick="clearCart()">Clear Cart</button>
            <a href="{{ "/checkout" | relURL }}" class="btn cta-button">Proceed to Checkout</a>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    displayCartItems();
});

function displayCartItems() {
    const cart = JSON.parse(localStorage.getItem('cart') || '[]');
    const cartItemsContainer = document.getElementById('cart-items');
    const cartTotalElement = document.getElementById('cart-total');
    
    if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<p>Your cart is empty. <a href="/products/">Continue shopping</a></p>';
        cartTotalElement.textContent = 'Total: $0.00';
        return;
    }
    
    let total = 0;
    cartItemsContainer.innerHTML = '';
    
    cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
            <div class="cart-item-info">
                <h4>${item.name}</h4>
                <p>SKU: ${item.sku}</p>
                <p>Quantity: ${item.quantity}</p>
            </div>
            <div class="cart-item-actions">
                <div class="cart-item-price">$${itemTotal.toFixed(2)}</div>
                <button class="btn btn-secondary" onclick="removeFromCart('${item.sku}')">Remove</button>
            </div>
        `;
        cartItemsContainer.appendChild(cartItem);
    });
    
    cartTotalElement.textContent = `Total: $${total.toFixed(2)}`;
}
</script>
{{ end }}
